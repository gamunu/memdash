function writeLastRefresh(){"use strict";var minutes=Math.floor(timer/60),seconds=timer%60;$refreshtime.text(minutes+":"+seconds)}function fetchData(url){"use strict";requests.url=url,null!==requests.genaral&&(requests.genaral.abort(),requests.slabs.abort(),requests.items.abort(),requests.settings.abort()),$.get("stats",{server:url},function(data){$genaral.html(data)}),requests.genaral=$.get("statst",{server:url},function(data){data.length>0&&$statics_table.fnAddData(data)}),requests.slabs=$.get("slabs",{server:url},function(data){data.length>0&&$slabs_table.fnAddData(data)}),requests.items=$.get("items",{server:url},function(data){data.length>0&&$items_table.fnAddData(data)}),requests.settings=$.get("settings",{server:url},function(data){data.length>0&&$settings_table.fnAddData(data)})}function initDataTables(){"use strict";$.get("first").done(function(data){var url=data.server;$statics_table=$("#statics-table").dataTable(),$slabs_table=$("#slabs-table").dataTable(),$items_table=$("#items-table").dataTable(),$settings_table=$("#settings-table").dataTable(),$sizes_table=$("#sizes-table").dataTable(),$title.text(url),fetchData(url)})}function clearTables(){"use strict";$statics_table.api().clear().draw(),$slabs_table.api().clear().draw(),$items_table.api().clear().draw(),$settings_table.api().clear().draw()}function changeServer(url){"use strict";$title.text(url),$genaral.html(""),clearTables(),fetchData(url)}window.alert=function(text){"use strict";return console.log("tried to alert: "+text),!0};var $genaral=$("#general-stats"),$statics_table,$slabs_table,$sizes_table,$items_table,$settings_table,$title=$(".stats-title"),$refreshtime=$("#refresh-time"),timer=0,requests={genaral:null,slabs:null,items:null,settings:null,url:"localhost"};$(document).ready(function(){"use strict";$.get("servers",function(data){var $list=$("#list");$list.html(data)}).done(function(){initDataTables()}),$(document).on("click","#list li",function(e){$("#list li.active").removeClass("active");var $this=$(this);$this.hasClass("active")||$this.addClass("active");var server=$this.data("server");changeServer(server),e.preventDefault()}),$(document).on("click","#getitemstats",function(){$sizes_table.api().clear().draw(),$.get("sizes",{server:requests.url},function(data){data.length>0&&$sizes_table.fnAddData(data)})}),$("body").tooltip({selector:"[rel=tooltip]"}),setInterval(function(){$.get("servers",function(data){var $list=$("#list");$list.html(data)}),clearTables(),changeServer(requests.url),timer=0},3e5),setInterval(function(){timer+=1;var minutes=Math.floor(timer/60),seconds=timer%60;$refreshtime.text(minutes+"min and "+seconds+"s ago")},1e3)});